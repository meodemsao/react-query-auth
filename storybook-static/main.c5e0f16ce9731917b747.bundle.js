(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{1085:function(module,exports,__webpack_require__){"use strict";__webpack_require__(3),__webpack_require__(53),__webpack_require__(43),__webpack_require__(35),__webpack_require__(45),__webpack_require__(1086),__webpack_require__(1087),__webpack_require__(10),__webpack_require__(44);var _clientApi=__webpack_require__(57),_clientLogger=__webpack_require__(38),_configFilename=__webpack_require__(1088);function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach((function(key){_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}(_configFilename.args||_configFilename.argTypes)&&_clientLogger.logger.warn("Invalid args/argTypes in config, ignoring.",JSON.stringify({args:_configFilename.args,argTypes:_configFilename.argTypes})),_configFilename.decorators&&_configFilename.decorators.forEach((function(decorator){return(0,_clientApi.addDecorator)(decorator,!1)})),_configFilename.loaders&&_configFilename.loaders.forEach((function(loader){return(0,_clientApi.addLoader)(loader,!1)})),(_configFilename.parameters||_configFilename.globals||_configFilename.globalTypes)&&(0,_clientApi.addParameters)(_objectSpread(_objectSpread({},_configFilename.parameters),{},{globals:_configFilename.globals,globalTypes:_configFilename.globalTypes}),!1),_configFilename.argTypesEnhancers&&_configFilename.argTypesEnhancers.forEach((function(enhancer){return(0,_clientApi.addArgTypesEnhancer)(enhancer)}))},1088:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"parameters",(function(){return parameters}));var _storybook_react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(211),msw_storybook_addon__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(322);Object(msw_storybook_addon__WEBPACK_IMPORTED_MODULE_1__.initializeWorker)(),Object(_storybook_react__WEBPACK_IMPORTED_MODULE_0__.addDecorator)(msw_storybook_addon__WEBPACK_IMPORTED_MODULE_1__.mswDecorator);var parameters={actions:{argTypesRegex:"^on.*"}}},1091:function(module,exports,__webpack_require__){"use strict";(function(module){(0,__webpack_require__(211).configure)([__webpack_require__(1092)],module,!1)}).call(this,__webpack_require__(111)(module))},1092:function(module,exports,__webpack_require__){var map={"./SampleApp.stories.tsx":1098};function webpackContext(req){var id=webpackContextResolve(req);return __webpack_require__(id)}function webpackContextResolve(req){if(!__webpack_require__.o(map,req)){var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e}return map[req]}webpackContext.keys=function webpackContextKeys(){return Object.keys(map)},webpackContext.resolve=webpackContextResolve,module.exports=webpackContext,webpackContext.id=1092},1098:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"Default",(function(){return Default}));__webpack_require__(177),__webpack_require__(4);var react=__webpack_require__(0),react_default=__webpack_require__.n(react);__webpack_require__(14),__webpack_require__(15),__webpack_require__(9),__webpack_require__(17),__webpack_require__(85),__webpack_require__(5);function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(arr,i){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(arr)))return;var _arr=[],_n=!0,_d=!1,_e=void 0;try{for(var _s,_i=arr[Symbol.iterator]();!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function useForm(initialValues){var _React$useState2=_slicedToArray(react_default.a.useState(initialValues),2),values=_React$useState2[0],setValues=_React$useState2[1];return{values:values,onChange:function onChange(e){setValues((function(v){return Object.assign({},v,function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}({},e.target.name,e.target.value))}))}}}__webpack_require__(80);var index_production=__webpack_require__(96),jsx_runtime=__webpack_require__(7);function initReactQueryAuth(config){var AuthContext=react_default.a.createContext(null);AuthContext.displayName="AuthContext";var loadUser=config.loadUser,loginFn=config.loginFn,registerFn=config.registerFn,logoutFn=config.logoutFn,_config$key=config.key,key=void 0===_config$key?"auth-user":_config$key,_config$waitInitial=config.waitInitial,waitInitial=void 0===_config$waitInitial||_config$waitInitial,_config$LoaderCompone=config.LoaderComponent,LoaderComponent=void 0===_config$LoaderCompone?function(){return Object(jsx_runtime.jsx)("div",{children:"Loading..."})}:_config$LoaderCompone,_config$ErrorComponen=config.ErrorComponent,ErrorComponent=void 0===_config$ErrorComponen?function(error){return Object(jsx_runtime.jsx)("div",{style:{color:"tomato"},children:JSON.stringify(error,null,2)})}:_config$ErrorComponen;return{AuthProvider:function AuthProvider(_ref){var children=_ref.children,queryClient=Object(index_production.useQueryClient)(),_useQuery=Object(index_production.useQuery)(key,loadUser),user=_useQuery.data,error=_useQuery.error,status=_useQuery.status,isLoading=_useQuery.isLoading,fetchStatus=_useQuery.fetchStatus,isSuccess=_useQuery.isSuccess,refetch=_useQuery.refetch,setUser=react_default.a.useCallback((function(data){return queryClient.setQueryData(key,data)}),[queryClient]),loginMutation=Object(index_production.useMutation)({mutationFn:loginFn,onSuccess:function onSuccess(user){setUser(user)}}),registerMutation=Object(index_production.useMutation)({mutationFn:registerFn,onSuccess:function onSuccess(user){setUser(user)}}),logoutMutation=Object(index_production.useMutation)({mutationFn:logoutFn,onSuccess:function onSuccess(){queryClient.clear()}}),value=react_default.a.useMemo((function(){return{user:user,error:error,refetchUser:refetch,login:loginMutation.mutateAsync,isLoggingIn:loginMutation.isLoading,logout:logoutMutation.mutateAsync,isLoggingOut:logoutMutation.isLoading,register:registerMutation.mutateAsync,isRegistering:registerMutation.isLoading}}),[user,error,refetch,loginMutation.mutateAsync,loginMutation.isLoading,logoutMutation.mutateAsync,logoutMutation.isLoading,registerMutation.mutateAsync,registerMutation.isLoading]);return isSuccess||!waitInitial?Object(jsx_runtime.jsx)(AuthContext.Provider,{value:value,children:children}):isLoading||"idle"===fetchStatus?Object(jsx_runtime.jsx)(LoaderComponent,{}):error?Object(jsx_runtime.jsx)(ErrorComponent,{error:error}):Object(jsx_runtime.jsxs)("div",{children:["Unhandled status: ",status]})},AuthConsumer:AuthContext.Consumer,useAuth:function useAuth(){var context=react_default.a.useContext(AuthContext);if(!context)throw new Error("useAuth must be used within an AuthProvider");return context}}}try{initReactQueryAuth.displayName="initReactQueryAuth",initReactQueryAuth.__docgenInfo={description:"",displayName:"initReactQueryAuth",props:{key:{defaultValue:null,description:"",name:"key",required:!1,type:{name:"string"}},loadUser:{defaultValue:null,description:"",name:"loadUser",required:!0,type:{name:"(data: any) => Promise<User>"}},loginFn:{defaultValue:null,description:"",name:"loginFn",required:!0,type:{name:"(data: any) => Promise<User>"}},registerFn:{defaultValue:null,description:"",name:"registerFn",required:!0,type:{name:"(data: any) => Promise<User>"}},logoutFn:{defaultValue:null,description:"",name:"logoutFn",required:!0,type:{name:"() => Promise<any>"}},waitInitial:{defaultValue:null,description:"",name:"waitInitial",required:!1,type:{name:"boolean"}},LoaderComponent:{defaultValue:null,description:"",name:"LoaderComponent",required:!1,type:{name:"(() => Element)"}},ErrorComponent:{defaultValue:null,description:"",name:"ErrorComponent",required:!1,type:{name:"(({ error }: { error: Error | null; }) => Element)"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/index.tsx#initReactQueryAuth"]={docgenInfo:initReactQueryAuth.__docgenInfo,name:"initReactQueryAuth",path:"src/index.tsx#initReactQueryAuth"})}catch(__react_docgen_typescript_loader_error){}var storage_getToken=function getToken(){return JSON.parse(window.localStorage.getItem("token"))},storage_setToken=function setToken(token){return window.localStorage.setItem("token",JSON.stringify(token))},storage_clearToken=function clearToken(){return window.localStorage.removeItem("token")};function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)}))}}function handleApiResponse(_x){return _handleApiResponse.apply(this,arguments)}function _handleApiResponse(){return(_handleApiResponse=_asyncToGenerator(regeneratorRuntime.mark((function _callee(response){var data;return regeneratorRuntime.wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.next=2,response.json();case 2:if(data=_context.sent,!response.ok){_context.next=7;break}return _context.abrupt("return",data);case 7:return _context.abrupt("return",Promise.reject(data));case 8:case"end":return _context.stop()}}),_callee)})))).apply(this,arguments)}function getUserProfile(){return _getUserProfile.apply(this,arguments)}function _getUserProfile(){return(_getUserProfile=_asyncToGenerator(regeneratorRuntime.mark((function _callee2(){return regeneratorRuntime.wrap((function _callee2$(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:return _context2.next=2,fetch("/auth/me",{headers:{Authorization:storage_getToken()}}).then(handleApiResponse);case 2:return _context2.abrupt("return",_context2.sent);case 3:case"end":return _context2.stop()}}),_callee2)})))).apply(this,arguments)}function loginWithEmailAndPassword(_x2){return _loginWithEmailAndPassword.apply(this,arguments)}function _loginWithEmailAndPassword(){return(_loginWithEmailAndPassword=_asyncToGenerator(regeneratorRuntime.mark((function _callee3(data){return regeneratorRuntime.wrap((function _callee3$(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:return _context3.abrupt("return",window.fetch("/auth/login",{method:"POST",body:JSON.stringify(data)}).then(handleApiResponse));case 1:case"end":return _context3.stop()}}),_callee3)})))).apply(this,arguments)}function registerWithEmailAndPassword(_x3){return _registerWithEmailAndPassword.apply(this,arguments)}function _registerWithEmailAndPassword(){return(_registerWithEmailAndPassword=_asyncToGenerator(regeneratorRuntime.mark((function _callee4(data){return regeneratorRuntime.wrap((function _callee4$(_context4){for(;;)switch(_context4.prev=_context4.next){case 0:return _context4.abrupt("return",window.fetch("/auth/register",{method:"POST",body:JSON.stringify(data)}).then(handleApiResponse));case 1:case"end":return _context4.stop()}}),_callee4)})))).apply(this,arguments)}function auth_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function auth_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){auth_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){auth_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)}))}}function handleUserResponse(_x){return _handleUserResponse.apply(this,arguments)}function _handleUserResponse(){return(_handleUserResponse=auth_asyncToGenerator(regeneratorRuntime.mark((function _callee(data){var jwt,user;return regeneratorRuntime.wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return jwt=data.jwt,user=data.user,storage_setToken(jwt),_context.abrupt("return",user);case 3:case"end":return _context.stop()}}),_callee)})))).apply(this,arguments)}function _loadUser(){return(_loadUser=auth_asyncToGenerator(regeneratorRuntime.mark((function _callee2(){var user,data;return regeneratorRuntime.wrap((function _callee2$(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:if(user=null,!storage_getToken()){_context2.next=6;break}return _context2.next=4,getUserProfile();case 4:data=_context2.sent,user=data;case 6:return _context2.abrupt("return",user);case 7:case"end":return _context2.stop()}}),_callee2)})))).apply(this,arguments)}function _loginFn(){return(_loginFn=auth_asyncToGenerator(regeneratorRuntime.mark((function _callee3(data){var response,user;return regeneratorRuntime.wrap((function _callee3$(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:return _context3.next=2,loginWithEmailAndPassword(data);case 2:return response=_context3.sent,_context3.next=5,handleUserResponse(response);case 5:return user=_context3.sent,_context3.abrupt("return",user);case 7:case"end":return _context3.stop()}}),_callee3)})))).apply(this,arguments)}function _registerFn(){return(_registerFn=auth_asyncToGenerator(regeneratorRuntime.mark((function _callee4(data){var response,user;return regeneratorRuntime.wrap((function _callee4$(_context4){for(;;)switch(_context4.prev=_context4.next){case 0:return _context4.next=2,registerWithEmailAndPassword(data);case 2:return response=_context4.sent,_context4.next=5,handleUserResponse(response);case 5:return user=_context4.sent,_context4.abrupt("return",user);case 7:case"end":return _context4.stop()}}),_callee4)})))).apply(this,arguments)}function _logoutFn(){return(_logoutFn=auth_asyncToGenerator(regeneratorRuntime.mark((function _callee5(){return regeneratorRuntime.wrap((function _callee5$(_context5){for(;;)switch(_context5.prev=_context5.next){case 0:return _context5.next=2,storage_clearToken();case 2:case"end":return _context5.stop()}}),_callee5)})))).apply(this,arguments)}var _initReactQueryAuth=initReactQueryAuth({loadUser:function auth_loadUser(){return _loadUser.apply(this,arguments)},loginFn:function auth_loginFn(_x2){return _loginFn.apply(this,arguments)},registerFn:function auth_registerFn(_x3){return _registerFn.apply(this,arguments)},logoutFn:function auth_logoutFn(){return _logoutFn.apply(this,arguments)}}),auth_AuthProvider=_initReactQueryAuth.AuthProvider,auth_useAuth=(_initReactQueryAuth.AuthConsumer,_initReactQueryAuth.useAuth);function Login_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function Login_slicedToArray(arr,i){return function Login_arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function Login_iterableToArrayLimit(arr,i){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(arr)))return;var _arr=[],_n=!0,_d=!1,_e=void 0;try{for(var _s,_i=arr[Symbol.iterator]();!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function Login_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return Login_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Login_arrayLikeToArray(o,minLen)}(arr,i)||function Login_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Login_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function Login(){var login=auth_useAuth().login,_useForm=useForm(),values=_useForm.values,onChange=_useForm.onChange,_React$useState2=Login_slicedToArray(react_default.a.useState(null),2),error=_React$useState2[0],setError=_React$useState2[1];return Object(jsx_runtime.jsxs)("div",{children:["Login",Object(jsx_runtime.jsxs)("form",{onSubmit:function(){var _ref=function Login_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){Login_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){Login_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)}))}}(regeneratorRuntime.mark((function _callee(e){return regeneratorRuntime.wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return e.preventDefault(),_context.prev=1,_context.next=4,login(values);case 4:_context.next=9;break;case 6:_context.prev=6,_context.t0=_context.catch(1),setError(_context.t0);case 9:case"end":return _context.stop()}}),_callee,null,[[1,6]])})));return function(_x){return _ref.apply(this,arguments)}}(),children:[Object(jsx_runtime.jsx)("input",{autoComplete:"new-password",placeholder:"email",name:"email",onChange:onChange}),Object(jsx_runtime.jsx)("input",{type:"password",placeholder:"password",name:"password",onChange:onChange}),Object(jsx_runtime.jsx)("button",{type:"submit",children:"Submit"})]}),error&&Object(jsx_runtime.jsx)("div",{style:{color:"tomato"},children:JSON.stringify(error,null,2)})]})}function Register_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function Register_slicedToArray(arr,i){return function Register_arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function Register_iterableToArrayLimit(arr,i){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(arr)))return;var _arr=[],_n=!0,_d=!1,_e=void 0;try{for(var _s,_i=arr[Symbol.iterator]();!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function Register_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return Register_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Register_arrayLikeToArray(o,minLen)}(arr,i)||function Register_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Register_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function Register(){var register=auth_useAuth().register,_useForm=useForm(),values=_useForm.values,onChange=_useForm.onChange,_React$useState2=Register_slicedToArray(react_default.a.useState(null),2),error=_React$useState2[0],setError=_React$useState2[1];return Object(jsx_runtime.jsxs)("div",{children:["Register",Object(jsx_runtime.jsxs)("form",{onSubmit:function(){var _ref=function Register_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){Register_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){Register_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)}))}}(regeneratorRuntime.mark((function _callee(e){return regeneratorRuntime.wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return e.preventDefault(),_context.prev=1,_context.next=4,register(values);case 4:_context.next=9;break;case 6:_context.prev=6,_context.t0=_context.catch(1),setError(_context.t0);case 9:case"end":return _context.stop()}}),_callee,null,[[1,6]])})));return function(_x){return _ref.apply(this,arguments)}}(),children:[Object(jsx_runtime.jsx)("input",{autoComplete:"new-password",placeholder:"email",name:"email",onChange:onChange}),Object(jsx_runtime.jsx)("input",{placeholder:"name",name:"name",onChange:onChange}),Object(jsx_runtime.jsx)("input",{type:"password",placeholder:"password",name:"password",onChange:onChange}),Object(jsx_runtime.jsx)("button",{type:"submit",children:"Submit"}),error&&Object(jsx_runtime.jsx)("div",{style:{color:"tomato"},children:JSON.stringify(error,null,2)})]})]})}function Auth_slicedToArray(arr,i){return function Auth_arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function Auth_iterableToArrayLimit(arr,i){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(arr)))return;var _arr=[],_n=!0,_d=!1,_e=void 0;try{for(var _s,_i=arr[Symbol.iterator]();!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function Auth_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return Auth_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Auth_arrayLikeToArray(o,minLen)}(arr,i)||function Auth_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Auth_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function Auth(){var _React$useState2=Auth_slicedToArray(react_default.a.useState("login"),2),mode=_React$useState2[0],setMode=_React$useState2[1];return Object(jsx_runtime.jsxs)("div",{children:[Object(jsx_runtime.jsx)("div",{children:"login"===mode&&Object(jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[Object(jsx_runtime.jsx)(Login,{}),Object(jsx_runtime.jsx)("button",{style:{marginTop:"20px"},onClick:function onClick(){return setMode("register")},children:"Go To Register"})]})}),Object(jsx_runtime.jsx)("div",{children:"register"===mode&&Object(jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[Object(jsx_runtime.jsx)(Register,{}),Object(jsx_runtime.jsx)("button",{style:{marginTop:"20px"},onClick:function onClick(){return setMode("login")},children:"Go To Login"})]})})]})}function UserInfo(){var _useAuth=auth_useAuth(),user=_useAuth.user,logout=_useAuth.logout;return Object(jsx_runtime.jsxs)("div",{children:["Welcome ",user.name,Object(jsx_runtime.jsx)("button",{onClick:function onClick(){return logout()},children:"Log Out"})]})}function App(){return auth_useAuth().user?Object(jsx_runtime.jsx)(UserInfo,{}):Object(jsx_runtime.jsx)(Auth,{})}Login.displayName="Login",Register.displayName="Register",Auth.displayName="Auth",UserInfo.displayName="UserInfo";var umd_index_production=__webpack_require__(480),react_query_queryClient=new index_production.QueryClient;function ReactQueryProvider(_ref){var children=_ref.children;return Object(jsx_runtime.jsxs)(index_production.QueryClientProvider,{client:react_query_queryClient,children:[Object(jsx_runtime.jsx)(umd_index_production.ReactQueryDevtools,{}),children]})}ReactQueryProvider.displayName="ReactQueryProvider";try{ReactQueryProvider.displayName="ReactQueryProvider",ReactQueryProvider.__docgenInfo={description:"",displayName:"ReactQueryProvider",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["sample-app/lib/react-query.tsx#ReactQueryProvider"]={docgenInfo:ReactQueryProvider.__docgenInfo,name:"ReactQueryProvider",path:"sample-app/lib/react-query.tsx#ReactQueryProvider"})}catch(__react_docgen_typescript_loader_error){}function SampleApp(){return Object(jsx_runtime.jsx)(ReactQueryProvider,{children:Object(jsx_runtime.jsx)(auth_AuthProvider,{children:Object(jsx_runtime.jsx)(App,{})})})}SampleApp.displayName="SampleApp";var rest_deps=__webpack_require__(95),users=(__webpack_require__(68),JSON.parse(window.localStorage.getItem("db_users")||"{}")),blackListEmails=["hacker@mail.com","asd@mail.com"];function getUser(email){return users[email]}var handlers=[rest_deps.e.get("/auth/me",(function(req,res,ctx){var user=getUser(req.headers.get("Authorization"));return user?res(ctx.delay(1e3),ctx.json(user)):res(ctx.delay(1e3),ctx.status(401),ctx.json({message:"Unauthorized"}))})),rest_deps.e.post("/auth/login",(function(req,res,ctx){var user=getUser(JSON.parse(req.body).email);return user?res(ctx.delay(1e3),ctx.json({jwt:user.email,user:user})):res(ctx.delay(1e3),ctx.status(401),ctx.json({message:"Unauthorized"}))})),rest_deps.e.post("/auth/register",(function(req,res,ctx){var parsedBody=JSON.parse(req.body);if(!getUser(null==parsedBody?void 0:parsedBody.email)&&parsedBody){var newUser=function db_setUser(data){return null!=data&&data.email&&!blackListEmails.includes(null==data?void 0:data.email)?(users[data.email]=data,window.localStorage.setItem("db_users",JSON.stringify(users)),data):null}(parsedBody);return newUser?res(ctx.delay(1e3),ctx.json({jwt:newUser.email,user:getUser(newUser.email)})):res(ctx.delay(1e3),ctx.status(403),ctx.json({message:"Forbidden User"}))}return res(ctx.delay(1e3),ctx.status(400),ctx.json({message:"The user already exists!"}))}))],meta={title:"SampleApp",component:SampleApp,parameters:{controls:{expanded:!0}}},SampleApp_stories_Template=(__webpack_exports__.default=meta,function Template(){return Object(jsx_runtime.jsx)(SampleApp,{})});SampleApp_stories_Template.displayName="Template";var Default=SampleApp_stories_Template.bind({});Default.story={parameters:{msw:handlers}},Default.parameters=Object.assign({storySource:{source:"() => <SampleApp />"}},Default.parameters);try{Meta.displayName="Meta",Meta.__docgenInfo={description:"Metadata to configure the stories for a component.",displayName:"Meta",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["stories/SampleApp.stories.tsx#Meta"]={docgenInfo:Meta.__docgenInfo,name:"Meta",path:"stories/SampleApp.stories.tsx#Meta"})}catch(__react_docgen_typescript_loader_error){}},483:function(module,exports,__webpack_require__){__webpack_require__(484),__webpack_require__(647),__webpack_require__(648),__webpack_require__(806),__webpack_require__(1026),__webpack_require__(1059),__webpack_require__(1064),__webpack_require__(1076),__webpack_require__(1078),__webpack_require__(1083),__webpack_require__(1085),module.exports=__webpack_require__(1091)},557:function(module,exports){},648:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__(211)}},[[483,1,2]]]);
//# sourceMappingURL=main.c5e0f16ce9731917b747.bundle.js.map